{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 40;\nconst API_KEY = '44418416-01658c71a65aed4380a3ece44';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst fetchImages = async (query, page) => {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(error);\n    }\n};\n\nconst renderImages = images => {\n    const markup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"photo-card\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n            </div>\n        </a>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    new SimpleLightbox('.gallery a', { captionDelay: 250 }).refresh();\n};\n\nconst clearGallery = () => {\n    gallery.innerHTML = '';\n};\n\nconst smoothScroll = () => {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n    });\n};\n\nconst observer = new IntersectionObserver(async (entries, observer) => {\n    if (entries[0].isIntersecting) {\n        page += 1;\n        const data = await fetchImages(searchQuery, page);\n        renderImages(data.hits);\n        smoothScroll();\n        if (page * perPage >= data.totalHits) {\n            observer.disconnect();\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n    }\n}, { rootMargin: '200px' });\n\nconst handleSearch = async event => {\n    event.preventDefault();\n    searchQuery = event.currentTarget.elements.searchQuery.value.trim();\n    if (!searchQuery) return;\n    page = 1;\n    clearGallery();\n\n    const data = await fetchImages(searchQuery, page);\n    if (data.hits.length === 0) {\n        iziToast.error({ title: 'Error', message: 'Sorry, there are no images matching your search query. Please try again.' });\n        return;\n    }\n    renderImages(data.hits);\n    iziToast.success({ title: 'Success', message: `Hooray! We found ${data.totalHits} images.` });\n\n    if (data.hits.length === perPage) {\n        observer.observe(document.querySelector('.gallery').lastElementChild);\n    }\n};\n\nform.addEventListener('submit', handleSearch);\n"],"names":["form","gallery","searchQuery","page","perPage","API_KEY","BASE_URL","fetchImages","query","axios","error","renderImages","images","markup","image","SimpleLightbox","clearGallery","smoothScroll","cardHeight","observer","entries","data","iziToast","handleSearch","event"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAc,GACdC,EAAO,EACX,MAAMC,EAAU,GACVC,EAAU,qCACVC,EAAW,2BAEXC,EAAc,MAAOC,EAAOL,IAAS,CACvC,GAAI,CAYA,OAXiB,MAAMM,EAAM,IAAIH,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAML,EACN,SAAUC,CACb,CACb,CAAS,GACe,IACnB,OAAQM,EAAO,CACZ,QAAQ,MAAMA,CAAK,CACtB,CACL,EAEMC,EAAeC,GAAU,CAC3B,MAAMC,EAASD,EAAO,IAAIE,GAAS;AAAA,mBACpBA,EAAM,aAAa;AAAA,wBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,qDAETA,EAAM,KAAK;AAAA,qDACXA,EAAM,KAAK;AAAA,wDACRA,EAAM,QAAQ;AAAA,yDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAGnE,EAAE,KAAK,EAAE,EACVb,EAAQ,mBAAmB,YAAaY,CAAM,EAC9C,IAAIE,EAAe,aAAc,CAAE,aAAc,GAAK,CAAA,EAAE,SAC5D,EAEMC,EAAe,IAAM,CACvBf,EAAQ,UAAY,EACxB,EAEMgB,EAAe,IAAM,CACvB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL,EAEMC,EAAW,IAAI,qBAAqB,MAAOC,EAASD,IAAa,CACnE,GAAIC,EAAQ,CAAC,EAAE,eAAgB,CAC3BjB,GAAQ,EACR,MAAMkB,EAAO,MAAMd,EAAYL,EAAaC,CAAI,EAChDQ,EAAaU,EAAK,IAAI,EACtBJ,IACId,EAAOC,GAAWiB,EAAK,YACvBF,EAAS,WAAU,EACnBG,EAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,4DAA4D,CAAE,EAE7G,CACL,EAAG,CAAE,WAAY,OAAO,CAAE,EAEpBC,EAAe,MAAMC,GAAS,CAGhC,GAFAA,EAAM,eAAc,EACpBtB,EAAcsB,EAAM,cAAc,SAAS,YAAY,MAAM,OACzD,CAACtB,EAAa,OAClBC,EAAO,EACPa,IAEA,MAAMK,EAAO,MAAMd,EAAYL,EAAaC,CAAI,EAChD,GAAIkB,EAAK,KAAK,SAAW,EAAG,CACxBC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,0EAA0E,CAAE,EACtH,MACH,CACDX,EAAaU,EAAK,IAAI,EACtBC,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,oBAAoBD,EAAK,SAAS,UAAY,CAAA,EAExFA,EAAK,KAAK,SAAWjB,GACrBe,EAAS,QAAQ,SAAS,cAAc,UAAU,EAAE,gBAAgB,CAE5E,EAEAnB,EAAK,iBAAiB,SAAUuB,CAAY"}